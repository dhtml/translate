{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@dhtml/translate/webpack/bootstrap","webpack://@dhtml/translate/webpack/runtime/compat get default export","webpack://@dhtml/translate/webpack/runtime/define property getters","webpack://@dhtml/translate/webpack/runtime/hasOwnProperty shorthand","webpack://@dhtml/translate/webpack/runtime/make namespace object","webpack://@dhtml/translate/external root \"flarum.core.compat['common/app']\"","webpack://@dhtml/translate/./src/common/index.ts","webpack://@dhtml/translate/external root \"flarum.core.compat['forum/app']\"","webpack://@dhtml/translate/external root \"flarum.core.compat['common/extend']\"","webpack://@dhtml/translate/external root \"flarum.core.compat['common/components/Button']\"","webpack://@dhtml/translate/external root \"flarum.core.compat['forum/components/LocaleDropdown']\"","webpack://@dhtml/translate/external root \"flarum.core.compat['common/components/HeaderSecondary']\"","webpack://@dhtml/translate/external root \"flarum.core.compat['common/components/SelectDropdown']\"","webpack://@dhtml/translate/./src/common/languages.ts","webpack://@dhtml/translate/./src/forum/index.ts","webpack://@dhtml/translate/./src/common/subdomains.ts","webpack://@dhtml/translate/./src/forum/includes/addLanguageMenu.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","import app from 'flarum/common/app';\n\napp.initializers.add('dhtml/translate', () => {\n  //console.log('[dhtml/translate] Hello, forum and admin!');\n});\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/LocaleDropdown'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/HeaderSecondary'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/SelectDropdown'];","import app from 'flarum/common/app';\n\nexport const locales: string[] = [\n  \"af\", \"am\", \"ar\", \"as\", \"az\", \"ba\", \"be\", \"bg\", \"bn\", \"bs\", \"ca\", \"cs\", \"cy\", \"da\", \"de\", \"dv\", \"el\", \"en\", \"eo\", \"es\", \"et\", \"eu\", \"fa\", \"fi\", \"fil\", \"fj\", \"fo\", \"fr\", \"ga\", \"gl\", \"gu\", \"ha\", \"he\", \"hi\", \"hr\", \"hu\", \"hy\", \"id\", \"ig\", \"is\", \"it\", \"ja\", \"ka\", \"kk\", \"km\", \"kn\", \"ko\", \"ku\", \"ky\", \"lo\", \"lt\", \"lv\", \"mg\", \"mi\", \"mk\", \"ml\", \"mn\", \"mr\", \"ms\", \"mt\", \"my\", \"nb\", \"ne\", \"nl\", \"no\", \"ny\", \"or\", \"pa\", \"ps\", \"pl\", \"pt\", \"ro\", \"ru\", \"sd\", \"si\", \"sk\", \"sl\", \"sm\", \"so\", \"sq\", \"sr\", \"st\", \"su\", \"sv\", \"sw\", \"ta\", \"te\", \"th\", \"tl\", \"tr\", \"uk\", \"ur\", \"uz\", \"vi\", \"xh\", \"yo\", \"zh\", \"zt\", \"zu\"\n];\n\nexport const selectedLocale = (): string[] => {\n  const languages = app.forum.attribute('dhtmlLanguageMenu');\n  return languages?.split(',').map((locale: string) => locale.trim());\n};\n\n\n\n// Mapping of locale codes to language names\nconst localeToLanguage: { [key: string]: string } = {\n  \"af\": \"Afrikaans\",\n  \"am\": \"አማርኛ\",\n  \"ar\": \"العربية\",\n  \"as\": \"অসমীয়া\",\n  \"az\": \"Azərbaycan\",\n  \"ba\": \"Башҡорт\",\n  \"be\": \"Беларуская\",\n  \"bg\": \"Български\",\n  \"bn\": \"বাংলা\",\n  \"bs\": \"Bosanski\",\n  \"ca\": \"Català\",\n  \"cs\": \"Čeština\",\n  \"cy\": \"Cymraeg\",\n  \"da\": \"Dansk\",\n  \"de\": \"Deutsch\",\n  \"dv\": \"ދިވެހި\",\n  \"el\": \"Ελληνικά\",\n  \"en\": \"English\",\n  \"eo\": \"Esperanto\",\n  \"es\": \"Español\",\n  \"et\": \"Eesti\",\n  \"eu\": \"Euskara\",\n  \"fa\": \"فارسی\",\n  \"fi\": \"Suomi\",\n  \"fil\": \"Filipino\",\n  \"fj\": \"Na Vosa Vakaviti\",\n  \"fo\": \"Føroyskt\",\n  \"fr\": \"Français\",\n  \"ga\": \"Gaeilge\",\n  \"gl\": \"Galego\",\n  \"gu\": \"ગુજરાતી\",\n  \"ha\": \"Hausa\",\n  \"he\": \"עברית\",\n  \"hi\": \"हिन्दी\",\n  \"hr\": \"Hrvatski\",\n  \"hu\": \"Magyar\",\n  \"hy\": \"Հայերեն\",\n  \"id\": \"Indonesia\",\n  \"ig\": \"Igbo\",\n  \"is\": \"Íslenska\",\n  \"it\": \"Italiano\",\n  \"ja\": \"日本語\",\n  \"ka\": \"ქართული\",\n  \"kk\": \"Қазақ\",\n  \"km\": \"ភាសាខ្មែរ\",\n  \"kn\": \"ಕನ್ನಡ\",\n  \"ko\": \"한국어\",\n  \"ku\": \"Kurdî\",\n  \"ky\": \"Кыргызча\",\n  \"lo\": \"ລາວ\",\n  \"lt\": \"Lietuvių\",\n  \"lv\": \"Latviešu\",\n  \"mg\": \"Malagasy\",\n  \"mi\": \"Māori\",\n  \"mk\": \"Македонски\",\n  \"ml\": \"മലയാളം\",\n  \"mn\": \"Монгол\",\n  \"mr\": \"मराठी\",\n  \"ms\": \"Melayu\",\n  \"mt\": \"Malti\",\n  \"my\": \"မြန်မာစာ\",\n  \"nb\": \"Norsk Bokmål\",\n  \"ne\": \"नेपाली\",\n  \"nl\": \"Nederlands\",\n  \"no\": \"Norsk\",\n  \"ny\": \"ChiCheŵa\",\n  \"or\": \"ଓଡ଼ିଆ\",\n  \"pa\": \"ਪੰਜਾਬੀ\",\n  \"ps\": \"پښتو\",\n  \"pl\": \"Polski\",\n  \"pt\": \"Português\",\n  \"ro\": \"Română\",\n  \"ru\": \"Русский\",\n  \"sd\": \"سنڌي\",\n  \"si\": \"සිංහල\",\n  \"sk\": \"Slovenčina\",\n  \"sl\": \"Slovenščina\",\n  \"sm\": \"Gagana Samoa\",\n  \"so\": \"Soomaali\",\n  \"sq\": \"Shqip\",\n  \"sr\": \"Српски\",\n  \"st\": \"Sesotho\",\n  \"su\": \"Basa Sunda\",\n  \"sv\": \"Svenska\",\n  \"sw\": \"Kiswahili\",\n  \"ta\": \"தமிழ்\",\n  \"te\": \"తెలుగు\",\n  \"th\": \"ไทย\",\n  \"tl\": \"Tagalog\",\n  \"tr\": \"Türkçe\",\n  \"uk\": \"Українська\",\n  \"ur\": \"اردو\",\n  \"uz\": \"Oʻzbek\",\n  \"vi\": \"Tiếng Việt\",\n  \"xh\": \"isiXhosa\",\n  \"yo\": \"Yorùbá\",\n  \"zh\": \"中文\",\n  \"zt\": \"中文(繁體)\",\n  \"zu\": \"isiZulu\"\n};\n\nexport const getSelectLanguages = () => {\n\n  const languages: { [key: string]: string } = {};\n\n  for (const locale of selectedLocale()) {\n      languages[locale] = localeToLanguage[locale];\n  }\n\n  return languages;\n};\n","import app from 'flarum/forum/app';\nimport addLanguageMenu from \"./includes/addLanguageMenu\";\nimport {getSubdomain} from \"../common/subdomains\";\n\napp.initializers.add('dhtml/translate', () => {\n\n  const subdomain = getSubdomain();\n  if(subdomain) {\n    const locale = subdomain;\n    /*\n    if (app.session.user) {\n      app.session.user.savePreferences({ locale });\n    } else {\n      document.cookie = `locale=${locale}; path=/; expires=Tue, 19 Jan 2038 03:14:07 GMT`;\n    }\n     */\n  }\n\n  addLanguageMenu();\n});\n","export const getSubdomain = () => {\n  // Get the hostname from the current URL\n  const hostname = window.location.hostname;\n\n  // Split the hostname by dots\n  const parts = hostname.split('.');\n\n  // Check if the hostname has at least 3 parts (subdomain, domain, and TLD)\n  if (parts.length > 2) {\n    return parts[0]; // Return the first part, which is the subdomain\n  }\n\n  return null; // Return null if there's no subdomain\n}\n\n","import { extend } from 'flarum/common/extend';\nimport app from 'flarum/forum/app';\nimport LocaleDropdown from 'flarum/forum/components/LocaleDropdown';\nimport Button from 'flarum/common/components/Button';\nimport HeaderSecondary from 'flarum/common/components/HeaderSecondary';\nimport SelectDropdown from 'flarum/common/components/SelectDropdown';\nimport {getSelectLanguages} from \"../../common/languages\";\n\nexport const modifyURL = (url, newSubdomain) => {\n  try {\n    // Parse the URL\n    let urlObj = new URL(url);\n\n    // Split the hostname into parts\n    let hostParts = urlObj.hostname.split('.');\n\n    // If the hostname has more than 2 parts, remove the subdomain\n    if (hostParts.length > 2) {\n      hostParts.shift(); // Remove the first part (subdomain)\n    }\n\n    // Create the new hostname with the custom subdomain\n    let newHostname = newSubdomain + '.' + hostParts.join('.');\n\n    // Update the URL object with the new hostname\n    urlObj.hostname = newHostname;\n\n    // Return the modified URL\n    return urlObj.toString();\n  } catch (error) {\n    console.error('Invalid URL:', error);\n    return null;\n  }\n};\n\nexport default function () {\n\n\n  extend(HeaderSecondary.prototype, 'items', function (items) {\n    // Clear existing items\n\n    const languages = getSelectLanguages();\n\n    /*\n    const languages = {\n      \"en\": \"English\",\n      \"ar\": \"العربية\",\n      \"zh\": \"中文\",\n      \"fr\": \"Français\",\n      \"de\": \"Deutsch\",\n      \"hi\": \"हिन्दी\",\n      \"pt\": \"Português\",\n      \"ru\": \"Русский\",\n      \"es\": \"Español\",\n    };\n    */\n\n\n    const locales = [];\n\n    for (const locale in languages) {\n      locales.push(\n        <Button\n          active={app.data.locale === locale}\n          icon={app.data.locale === locale ? 'fas fa-check' : true}\n          onclick={() => {\n            const newUrl = modifyURL(location.href,locale);\n            location.href=newUrl;\n          }}\n        >\n          {languages[locale]}\n        </Button>\n      );\n    }\n\n\n    items.add(\n      'locale',\n      <SelectDropdown\n        buttonClassName=\"Button Button--link\"\n        accessibleToggleLabel={app.translator.trans('core.forum.header.locale_dropdown_accessible_label')}\n      >\n        {locales}\n      </SelectDropdown>,\n      20\n    );\n\n  });\n}\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","app","add","localeToLanguage","getSelectLanguages","_step","languages","_iterator","_createForOfIteratorHelperLoose","attribute","split","map","locale","trim","selectedLocale","done","parts","window","location","hostname","length","extend","HeaderSecondary","items","locales","_loop","push","m","Button","active","icon","onclick","newUrl","url","newSubdomain","urlObj","URL","hostParts","shift","newHostname","join","toString","error","console","modifyURL","href","SelectDropdown","buttonClassName","accessibleToggleLabel","trans"],"sourceRoot":""}