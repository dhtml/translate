(()=>{var e={n:a=>{var t=a&&a.__esModule?()=>a.default:()=>a;return e.d(t,{a:t}),t},d:(a,t)=>{for(var o in t)e.o(t,o)&&!e.o(a,o)&&Object.defineProperty(a,o,{enumerable:!0,get:t[o]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},a={};(()=>{"use strict";e.r(a);const t=flarum.core.compat["common/app"];var o=e.n(t);o().initializers.add("dhtml/translate",(function(){}));const r=flarum.core.compat["forum/app"];var n=e.n(r);const i=flarum.core.compat["common/extend"],s=(flarum.core.compat["forum/components/LocaleDropdown"],flarum.core.compat["common/components/Button"]);var l=e.n(s);const c=flarum.core.compat["common/components/HeaderSecondary"];var u=e.n(c);const f=flarum.core.compat["common/components/SelectDropdown"];var d=e.n(f);function p(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,o=Array(a);t<a;t++)o[t]=e[t];return o}var v={af:"Afrikaans",am:"አማርኛ",ar:"العربية",as:"অসমীয়া",az:"Azərbaycan",ba:"Башҡорт",be:"Беларуская",bg:"Български",bn:"বাংলা",bs:"Bosanski",ca:"Català",cs:"Čeština",cy:"Cymraeg",da:"Dansk",de:"Deutsch",dv:"ދިވެހި",el:"Ελληνικά",en:"English",eo:"Esperanto",es:"Español",et:"Eesti",eu:"Euskara",fa:"فارسی",fi:"Suomi",fil:"Filipino",fj:"Na Vosa Vakaviti",fo:"Føroyskt",fr:"Français",ga:"Gaeilge",gl:"Galego",gu:"ગુજરાતી",ha:"Hausa",he:"עברית",hi:"हिन्दी",hr:"Hrvatski",hu:"Magyar",hy:"Հայերեն",id:"Indonesia",ig:"Igbo",is:"Íslenska",it:"Italiano",ja:"日本語",ka:"ქართული",kk:"Қазақ",km:"ភាសាខ្មែរ",kn:"ಕನ್ನಡ",ko:"한국어",ku:"Kurdî",ky:"Кыргызча",lo:"ລາວ",lt:"Lietuvių",lv:"Latviešu",mg:"Malagasy",mi:"Māori",mk:"Македонски",ml:"മലയാളം",mn:"Монгол",mr:"मराठी",ms:"Melayu",mt:"Malti",my:"မြန်မာစာ",nb:"Norsk Bokmål",ne:"नेपाली",nl:"Nederlands",no:"Norsk",ny:"ChiCheŵa",or:"ଓଡ଼ିଆ",pa:"ਪੰਜਾਬੀ",ps:"پښتو",pl:"Polski",pt:"Português",ro:"Română",ru:"Русский",sd:"سنڌي",si:"සිංහල",sk:"Slovenčina",sl:"Slovenščina",sm:"Gagana Samoa",so:"Soomaali",sq:"Shqip",sr:"Српски",st:"Sesotho",su:"Basa Sunda",sv:"Svenska",sw:"Kiswahili",ta:"தமிழ்",te:"తెలుగు",th:"ไทย",tl:"Tagalog",tr:"Türkçe",uk:"Українська",ur:"اردو",uz:"Oʻzbek",vi:"Tiếng Việt",xh:"isiXhosa",yo:"Yorùbá",zh:"中文",zt:"中文(繁體)",zu:"isiZulu"},h=function(){for(var e,a={},t=function(e,a){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,a){if(e){if("string"==typeof e)return p(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?p(e,a):void 0}}(e))||a&&e&&"number"==typeof e.length){t&&(e=t);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(function(){var e=o().forum.attribute("dhtmlLanguageMenu");return null==e?void 0:e.split(",").map((function(e){return e.trim()}))}());!(e=t()).done;){var r=e.value;a[r]=v[r]}return a};const y=flarum.core.compat["components/DiscussionListItem"];var b=e.n(y);n().initializers.add("dhtml/translate",(function(){(0,i.extend)(u().prototype,"items",(function(e){var a=h(),t=n().forum.attribute("dhtml-translate.subdomains"),o=[],r=function(e){o.push(m(l(),{active:n().data.locale===e,icon:n().data.locale!==e||"fas fa-check",onclick:function(){if(1==t){var a=function(e,a){try{var t=new URL(e),o=t.hostname.split(".");o.length>2&&o.shift();var r=a+"."+o.join(".");return t.hostname=r,t.toString()}catch(e){return console.error("Invalid URL:",e),null}}(location.href,e);location.href=a}else{var o=location.href.split("?")[0]+"?locale="+e;n().session.user?n().session.user.savePreferences({locale:e}).then((function(){return window.location.href=o})):(document.cookie="locale="+e+"; path=/; expires=Tue, 19 Jan 2038 03:14:07 GMT",window.location.href=o)}}},a[e]))};for(var i in a)r(i);e.add("locale",m(d(),{buttonClassName:"Button Button--link",accessibleToggleLabel:n().translator.trans("core.forum.header.locale_dropdown_accessible_label")},o),20)})),(0,i.extend)(b().prototype,"infoItems",(function(e){var a=this.attrs.discussion.firstPost();if(a){var t=n().forum.attribute("mediaPreviewCache");try{var o=(t=JSON.parse(t))[a.data.id];o&&e.add("excerpt",m.trust(o),-100)}catch(e){}}}))}))})(),module.exports=a})();
//# sourceMappingURL=forum.js.map